{{#*inline "main"}}
  <h2>User Creation</h2>
  <form action="/admin/user/create" method="POST">
    <p>Use the form below to create a new user...</p>
    <input type="text" name="username" placeholder="Username" />
    <input type="text" name="password" placeholder="Password" />
    <button type="submit" value="submit">Create</button>
  </form>
  <h2>Registered Users</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>ID</th>
        <th>Username</th>
        <th>Register Time</th>
        <th>Remove User</th>
        <th>Change Password</th>
        <th>Test Password</th>
      </tr>
    </thead>
    <tbody>
      {{#each users}}
      <tr>
        <td>{{@index}}</td>
        <td>{{id}}</td>
        <td>{{username}}</td>
        <td>{{register_date_time}}</td>
        <td>
          <form action="/admin/user/remove" method="POST" onsubmit="return confirm('Are you sure you want to remove user {{username}}?')">
            <input style="display: none" name="id" value="{{id}}" />
            <button type="submit">Remove</button>
          </form>
        </td>
        <td>
          <a href="/admin/user/change_password/{{id}}">Change Password</a>
        </td>
        <td>
          <a href="/admin/user/test_password/{{id}}">Test Password</a>
        </td>
      </tr>
      {{else}}
      <tr>
        <td colspan="7">
          <p style="text-align: center">No user found</p>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
  <h2>User Collection Setup</h2>
  <form action="/admin/user/setup" method="POST">
    <p>Click the button below to setup the index (After this you will no longer be able to have duplicate usernames)</p>
    <button type="submit">Setup</button>
  </form>
{{/inline}}

{{~> layout/admin title="Index"}}